@using System.Data
@using IsraaSystem.Application.Common.Enums
@using IsraaSystem.Web.Common
@model IsraaSystem.Core.Classic.HumanResource.EmployeePlacement.EmployeePlacementVM

@{
    Layout = null;
}

<div id="employee-page">
    <script type="text/javascript">
        setMenu('#menu-employee-location');
    </script>
    <div class="row">
        <div class="col-md-12">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-globe theme-font hide"></i>
                        <span class="caption-subject font-blue-madison bold uppercase">الموقع الوظيفي</span>
                    </div>
                    <div class="actions">
                        <a href="/HumanResource/EmployeePlacement/EmployeeAdd?empId=@Model.filter.EmployeeID" class="btn btn-primary pop-up-lg">إضافة موقع وظيفي جديد</a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="row">
                        <div class="col-md-12">
                            @if (Model.data != null && Model.data.Rows.Count > 0)
                            {
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th class="wp5">#</th>
                                            <th class="wp25 text-center">القسم</th>
                                            <th class="wp20 text-center">الوظيفة</th>
                                            <th class="wp10 text-center">حالة الإنتساب</th>
                                            <th class="wp10 text-center">نوع الإنتساب</th>
                                            <th class="wp10 text-center">من</th>
                                            <th class="wp10 text-center">إلى</th>
                                            <th class="wp5 text-center"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.data.Rows)
                                        {
                                            <tr>
                                                <td>@row["RowNo"]</td>
                                                <td class="text-center">@row["DepartmentName"]</td>
                                                <td class="text-center">@row["JobTitle"]</td>
                                                <td class="text-center">@row["PlacementStatus"]</td>
                                                <td class="text-center">@row["PlacementType"]</td>
                                                <td class="text-center">@row["DateFrom"]</td>
                                                <td class="text-center">@row["DateTo"]</td>
                                                <td class="no-warp">
                                                    <a href="/HumanResource/EmployeePlacement/EmployeeEdit/@row["ID"]" class="btn btn-sm btn-default pop-up-lg"><span class="fa fa-edit"></span></a>
                                                    @Ajax.ActionLink("حذف",
                                                        "EmployeeDelete",
                                                        new{Id= row["ID"] },
                                                        new AjaxOptions {
                                                            HttpMethod = "POST",
                                                            InsertionMode = InsertionMode.Replace,
                                                            UpdateTargetId = "employee-page",
                                                            OnSuccess = JsHelper.ShowToast(ToastTypeEnum.success,"تمت العملية بنجاح")

                                                        }
                                                        ,new{@class= "btn btn-sm btn-danger" })
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <div class="alert alert-info alert-dismissible text-center" role="alert">
                                    <span>لا يوجد بيانات لعرضها</span>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>